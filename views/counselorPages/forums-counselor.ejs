<!DOCTYPE html>

<html lang="en" class="light-style layout-menu-fixed" data-assets-path="" data-base-url="" data-framework="django" data-template="vertical-menu-free">

  <head>
	<%- include('../includes/head.ejs') %>



  </head>

  <body>
	<!-- Layout wrapper: Start -->
	<div class="layout-wrapper layout-content-navbar">
	  <div class="layout-container">
	
		<%- include('../includes/sidebar-counselor.ejs') %>
	
		<!-- Layout page: Start -->
		<div class="layout-page">
	
	
		  <!-- Navbar: Start -->
		  <%- include('../includes/header-counselor.ejs') %>
		  <!-- Navbar: End -->
	
	
		  <!-- Content wrapper: Start -->
		  <div class="content-wrapper">
			<!-- Content: Start -->
			

                <div class="card">

                  
                  <h5 class="card-header">Student Forums</h5>
                  <div class="card-body">
                    



                    <div class="container-xxl py-4 px-0">
                      
                      <% forums.forEach(forum => { %>
                        <div class="card mb-4 shadow-none border-1 ">
                          <div class="card-body">
                      
                            <!-- Header: Avatar + Name + Timestamp -->
                            <div class="d-flex justify-content-between align-items-center mb-2">
                              <div class="d-flex align-items-center">
                                <div class="avatar me-2">
                                  <img src="/images/user.png" alt="Avatar" class="rounded-circle" width="40" height="40">
                                </div>
                                <div>
                                  <div class="fw-semibold">
                                    <%= forum.student_first_name %> <%= forum.student_last_name %>
                                  </div>
                                  <div class="text-muted small">
                                    <%= new Date(forum.create_date).toLocaleString() %>
                                  </div>
                                </div>
                              </div>
                            </div>
                      
                            <!-- Post Content -->
                            <div class="mb-3">
                              <h6 class="fw-bold mb-1"><%= forum.title %></h6>
                              <p class="mb-0"><%= forum.content %></p>
                            </div>
                      
                            <!-- Footer: Join Button + Comments Count -->
                            <div class="d-flex justify-content-between align-items-center border-top pt-2">
                              <span class="text-muted small">
                                <%= forum.comment_count %> comment<%= forum.comment_count != '1' ? 's' : '' %>
                              </span>
                              <a href="/counselor/forums/<%= forum.id %>" class="btn btn-sm btn-outline-primary">View Forum</a>
                            </div>
                      
                          </div>
                        </div>
                      <% }) %>
                      
                      
                      
                    </div>
                    
                  </div>
                </div>
  
  
                  
			
	
			  <!-- / Content: End -->
	
			  <!-- Footer: Start -->
			  <!-- Footer: End -->

	
			  <div class="content-backdrop fade"></div>
        
			
			<!--/ Content wrapper: End -->
      
		  </div>
			  <%- include('../includes/footer.ejs') %>
      
		  <!-- / Layout page: End -->
		</div>
	
		<!-- Overlay -->
		<div class="layout-overlay layout-menu-toggle"></div>
		<!-- Drag Target Area To SlideIn Menu On Small Screens -->
		<div class="drag-target"></div>
	  </div>
	  <!-- Layout wrapper: End -->
	

	  <%- include('../includes/scripts.ejs') %>
    <script>
      window.onload = function() {
        const urlParams = new URLSearchParams(window.location.search);
        const status = urlParams.get('status');
    
        if (status === 'success') {
          // Trigger the success modal
          var successModal = new bootstrap.Modal(document.getElementById('successModal'));
          successModal.show();
        } else if (status === 'error') {
          // Trigger the error modal
          var errorModal = new bootstrap.Modal(document.getElementById('errorModal'));
          errorModal.show();
        }
      }
    </script>
    


  </body>

</html>